const { createEntryParser } = require('./parser')

it.each([
  [
    'all zeros',
    ' _  _  _  _  _  _  _  _  _ ' +
    '| || || || || || || || || |' +
    '|_||_||_||_||_||_||_||_||_|',
    [0, 0, 0, 0, 0, 0, 0, 0, 0]
  ],
  [
    'all ones',
    '                           ' +
    '  |  |  |  |  |  |  |  |  |' +
    '  |  |  |  |  |  |  |  |  |',
    [1, 1, 1, 1, 1, 1, 1, 1, 1]
  ],
  [
    'all twos',
    ' _  _  _  _  _  _  _  _  _ ' +
    ' _| _| _| _| _| _| _| _| _|' +
    '|_ |_ |_ |_ |_ |_ |_ |_ |_ ',
    [2, 2, 2, 2, 2, 2, 2, 2, 2]
  ],
  [
    'all threes',
    ' _  _  _  _  _  _  _  _  _ ' +
    ' _| _| _| _| _| _| _| _| _|' +
    ' _| _| _| _| _| _| _| _| _|',
    [3, 3, 3, 3, 3, 3, 3, 3, 3]
  ],
  [
    'all fours',
    '                           ' +
    '|_||_||_||_||_||_||_||_||_|' +
    '  |  |  |  |  |  |  |  |  |',
    [4, 4, 4, 4, 4, 4, 4, 4, 4]
  ],
  [
    'all fives',
    ' _  _  _  _  _  _  _  _  _ ' +
    '|_ |_ |_ |_ |_ |_ |_ |_ |_ ' +
    '|_||_||_||_||_||_||_||_||_|',
    [6, 6, 6, 6, 6, 6, 6, 6, 6]
  ],
  [
    'all sixs',
    ' _  _  _  _  _  _  _  _  _ ' +
    '|_ |_ |_ |_ |_ |_ |_ |_ |_ ' +
    ' _| _| _| _| _| _| _| _| _|',
    [5, 5, 5, 5, 5, 5, 5, 5, 5]
  ],
  [
    'all sevens',
    ' _  _  _  _  _  _  _  _  _ ' +
    '  |  |  |  |  |  |  |  |  |' +
    '  |  |  |  |  |  |  |  |  |',
    [7, 7, 7, 7, 7, 7, 7, 7, 7]
  ],
  [
    'all eights',
    ' _  _  _  _  _  _  _  _  _ ' +
    '|_||_||_||_||_||_||_||_||_|' +
    '|_||_||_||_||_||_||_||_||_|',
    [8, 8, 8, 8, 8, 8, 8, 8, 8]
  ],
  [
    'all nines',
    ' _  _  _  _  _  _  _  _  _ ' +
    '|_||_||_||_||_||_||_||_||_|' +
    ' _| _| _| _| _| _| _| _| _|',
    [9, 9, 9, 9, 9, 9, 9, 9, 9]
  ],
  [
    'digits from 1 to 9',
    '    _  _     _  _  _  _  _ ' +
    '  | _| _||_||_ |_   ||_||_|' +
    '  ||_  _|  | _||_|  ||_| _|',
    [1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9]
  ]
])('should read an entry containing %s', (_, entry, expectedDigits) => {
  const { parse } = createEntryParser(entry)

  expect(parse()).toStrictEqual(expectedDigits)
})

it('should read entry invalid digits as "null"', () => {
  const { parse } = createEntryParser(
    '    _  _     _  _  _  _  _ ' +
    '  | _|  ||_||_ |_   ||_||_|' +
    '  ||_  _|  | _||_|  ||_| _|'
  )

  expect(parse()).toStrictEqual([1, 2, null, 4, 5, 6, 7, 8, 9])
})
